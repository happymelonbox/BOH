{"ast":null,"code":"var _jsxFileName = \"/Users/Justin/Development/code/phase2/BIGPROJECT/boh/boh/src/components/Stock/StockTake.js\";\nimport React from 'react';\nimport { baseURL } from '../..';\nimport { stockEndPoint } from '../..';\nimport StocktakeForm from './StocktakeForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass StockTake extends React.Component {\n  constructor() {\n    super();\n\n    this.handleQuantityInput = event => {\n      const children = event.target.parentNode.children;\n      const id = Number(children[0].innerHTML);\n      const item = this.props.masterStocktake.products.find(product => {\n        return product.id === Number(id);\n      });\n      const pendingItem = this.state.pendingProducts.find(product => {\n        return product.id === item.id;\n      });\n      const pendingQuantity = this.state.pendingProducts.find(product => {\n        return product.quantity === item.id;\n      });\n\n      if (!pendingItem && !pendingQuantity) {\n        this.setState({\n          pendingProducts: [...this.props.masterStocktake.products, {\n            \"id\": item.id,\n            \"name\": item.name,\n            \"brand\": item.brand,\n            \"supplier\": item.supplier,\n            \"quantity\": Number(event.target.value),\n            \"unit\": item.unit,\n            \"price_per_unit\": item.price_per_unit,\n            \"location\": item.location,\n            \"type\": item.type\n          }]\n        });\n      }\n    };\n\n    this.submitStocktake = () => {\n      const date = new Date();\n      const day = date.getDate();\n      const month = date.getMonth() + 1;\n      const year = date.getFullYear();\n      const todaysDate = `${day}/${month}/${year}`;\n      const length = this.props.stocktake.length + 1;\n      console.log(length);\n      const body = {\n        \"id\": length,\n        \"date\": todaysDate,\n        \"products\": this.state.pendingProducts\n      };\n      fetch(baseURL + stockEndPoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      }).then(resp => resp.json()).then(data => console.log(data));\n    };\n\n    this.state = {\n      stocktakeTotal: 0,\n      pendingProducts: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(StocktakeForm, {\n        stocktake: this.props.masterStocktake,\n        handleInput: this.handleQuantityInput,\n        submitStocktake: this.submitStocktake\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default StockTake;","map":{"version":3,"sources":["/Users/Justin/Development/code/phase2/BIGPROJECT/boh/boh/src/components/Stock/StockTake.js"],"names":["React","baseURL","stockEndPoint","StocktakeForm","StockTake","Component","constructor","handleQuantityInput","event","children","target","parentNode","id","Number","innerHTML","item","props","masterStocktake","products","find","product","pendingItem","state","pendingProducts","pendingQuantity","quantity","setState","name","brand","supplier","value","unit","price_per_unit","location","type","submitStocktake","date","Date","day","getDate","month","getMonth","year","getFullYear","todaysDate","length","stocktake","console","log","body","fetch","method","headers","JSON","stringify","then","resp","json","data","stocktakeTotal","render"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport {baseURL} from '../..'\nimport {stockEndPoint} from '../..'\n\nimport StocktakeForm from './StocktakeForm'\n\nclass StockTake extends React.Component{\n    constructor(){\n        super()\n        this.state={\n            stocktakeTotal: 0,\n            pendingProducts:[]\n        }\n    }\n    handleQuantityInput = (event) => {\n        const children =event.target.parentNode.children\n        const id = Number(children[0].innerHTML)\n        const item = this.props.masterStocktake.products.find(product=>{return product.id === Number(id)})\n        const pendingItem = this.state.pendingProducts.find(product=>{return product.id === item.id})\n        const pendingQuantity = this.state.pendingProducts.find(product=>{return product.quantity === item.id})\n        if(!pendingItem && !pendingQuantity){\n        this.setState({\n            pendingProducts:[\n                ...this.props.masterStocktake.products,\n                {\n                \"id\": item.id,\n                \"name\": item.name,\n                \"brand\": item.brand,\n                \"supplier\": item.supplier,\n                \"quantity\": Number(event.target.value),\n                \"unit\": item.unit,\n                \"price_per_unit\": item.price_per_unit,\n                \"location\": item.location,\n                \"type\": item.type\n            }]\n        })\n        }\n    }\n\n    submitStocktake = () => {\n        const date = new Date()\n        const day = date.getDate()\n        const month = date.getMonth()+1\n        const year = date.getFullYear()\n        const todaysDate = `${day}/${month}/${year}`\n        const length = this.props.stocktake.length + 1\n        console.log(length)\n        const body = {\n                  \"id\": length,\n                  \"date\": todaysDate,\n                  \"products\": this.state.pendingProducts\n            }\n        fetch(baseURL + stockEndPoint, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(body)\n        })\n        .then(resp=>resp.json())\n        .then(data=>console.log(data))\n    }\n    render(){\n        return(\n            <div>\n                <StocktakeForm stocktake={this.props.masterStocktake} handleInput={this.handleQuantityInput} submitStocktake={this.submitStocktake}/>\n            </div>\n        )\n}\n}\nexport default StockTake"]},"metadata":{},"sourceType":"module"}